# 英语学习智能助手 (自适应 + 记忆)

一个基于记忆和自适应算法的个性化英语学习助手：
- 基于CEFR体系的课程大纲驱动 (A1→C1)
- 学生学习记忆追踪 (历史记录、掌握度、间隔复习)
- 自适应题目选择 (复习薄弱点 + 探索新知识)
- 命令行界面进行学习会话和查看报告

## 快速开始

```bash
# 1) 确保Python 3.9+
pip install -r requirements.txt

# 2) 运行程序
python main.py
```

## 系统原理

### 记忆系统
- **技能追踪**: 记录每个技能标签的掌握度、正确/错误次数
- **间隔复习**: 基于掌握度计算下次复习时间，类似SM-2算法
- **个性化难度**: 根据个人表现调整题目难度偏差

### 自适应算法
- **60% 复习模式**: 优先选择掌握度低或到期复习的技能对应题目
- **40% 探索模式**: 选择当前CEFR等级的新知识点
- **难度窗口**: 根据掌握度和个人偏差动态调整题目难度范围

### CEFR等级评估
根据各技能掌握度的中位数自动评估学生的CEFR等级：
- 掌握度 < 0.3: A1
- 掌握度 < 0.5: A2  
- 掌握度 < 0.65: B1
- 掌握度 < 0.8: B2
- 掌握度 ≥ 0.8: C1

## 使用示例

### 低级别学生示例 (A1水平)

**学生档案**: 小明，刚开始学英语
**系统记忆**: 之前学过几个基础语法点，但掌握度较低

```
请输入用户ID: xiaoming
学生姓名: 小明

━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 学习会话 - 当前水平≈A1 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Choose the correct form: He ___ to school every day.
  0. go
  1. goes  
  2. going
  3. gone
选择选项索引 [0]: 1

你的答案: 1  ->  正确！
Present simple: he/she/it + verb-(e)s → goes.

[回车] 继续 | r:查看报告 | q:退出: r

┏━━━━━━━━━━━━━━━━━━━━━━━ 小明 (xiaoming) 的学习报告  |  当前水平≈A1 ━━━━━━━━━━━━━━━━━━━━━━━┓
┃ 技能标签                  ┃ 掌握度 ┃ 正确/错误 ┃ 下次复习时间 (UTC)         ┃
┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩
│ grammar:present-simple    │ 0.25   │ 2/3       │ 2024-09-17T08:30:45        │
│ vocab:daily              │ 0.18   │ 1/4       │ 2024-09-17T06:15:22        │
└───────────────────────────┴────────┴───────────┴────────────────────────────┘
```

**系统行为**:
- 优先推送语法基础题目进行复习
- 题目难度保持在0.1-0.3区间
- 答对后适当延长复习间隔

### 高级别学生示例 (B2水平)

**学生档案**: 李华，有一定英语基础
**系统记忆**: 多个技能点掌握度较高，系统会推送更具挑战性的内容

```
请输入用户ID: lihua  
学生姓名: 李华

━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 学习会话 - 当前水平≈B2 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Choose the correct form: If I ___ more time, I would have finished the project.
  0. have
  1. had
  2. had had
  3. have had
选择选项索引 [0]: 2

你的答案: 2  ->  正确！
Third conditional: If + past perfect, would have + past participle.

[回车] 继续 | r:查看报告 | q:退出: r

┏━━━━━━━━━━━━━━━━━━━━━━━━━ 李华 (lihua) 的学习报告  |  当前水平≈B2 ━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ 技能标签                  ┃ 掌握度 ┃ 正确/错误 ┃ 下次复习时间 (UTC)         ┃
┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩
│ grammar:conditionals     │ 0.84   │ 8/2       │ 2024-09-22T10:45:30        │
│ vocab:academic          │ 0.79   │ 12/3      │ 2024-09-21T14:20:15        │
│ grammar:present-perfect │ 0.75   │ 6/2       │ 2024-09-20T16:30:00        │
│ vocab:business          │ 0.72   │ 9/4       │ 2024-09-19T09:15:45        │
└───────────────────────────┴────────┴───────────┴────────────────────────────┘
```

**系统行为**:
- 推送B2/C1级别的复杂语法和词汇题目
- 题目难度在0.6-0.9区间
- 复习间隔较长，注重挑战性内容的探索

## 扩展功能

### 添加题目
在 `data/questions_en.json` 中添加新题目：

```json
{
  "id": "q_new",
  "stem": "题目内容",
  "options": ["选项1", "选项2", "选项3", "选项4"],
  "answer": 1,
  "explain": "解释内容",
  "cefr": "B1",
  "tags": ["grammar:past-simple"],
  "difficulty": 0.45
}
```

### 自定义课程大纲
在 `data/syllabus_en.json` 中添加课程节点：

```json
{
  "id": "item_new",
  "title": "课程标题",
  "cefr": "B1",
  "tags": ["grammar:past-simple"],
  "prereq": ["previous_item_id"]
}
```

### 替换界面
- **Web界面**: 使用FastAPI替换CLI
- **GUI界面**: 使用Tkinter或PyQt
- **API接口**: 提供RESTful API供其他应用调用

## 项目结构

```
edu_english_agent_memory_personal/
├── main.py                           # 主程序入口
├── demo.py                           # 演示脚本
├── requirements.txt                  # 依赖包列表
├── README.md                        # 项目说明
├── data/                            # 数据文件
│   ├── questions_en.json            # 题库
│   ├── syllabus_en.json             # 课程大纲
│   ├── memory.json                  # 学生记忆数据 (自动生成)
│   ├── memory_example_beginner.json # 初级学生示例数据
│   └── memory_example_advanced.json # 高级学生示例数据
└── edu_agent/                       # 核心模块
    ├── __init__.py
    ├── engine.py                    # 答题引擎 - 判分和会话处理
    ├── memory.py                    # 记忆管理 - 学生档案和技能追踪
    ├── questions.py                 # 题库管理 - 题目加载和筛选
    ├── adapt.py                     # 自适应算法 - 智能题目选择
    └── syllabus.py                  # 课程大纲 - CEFR结构化内容
```

## 演示模式

运行演示脚本查看不同级别学生的学习数据：

```bash
python demo.py
```

演示脚本会展示：
- 低级别学生(小明, A1)和高级别学生(李华, B2)的学习档案
- 各技能点的掌握度分布和学习历史
- 系统的自适应推荐策略

## 技术特点

### 个性化学习算法
- **IRT模型**: 基于项目反应理论估计学生能力和题目难度
- **间隔重复**: 类似SM-2算法的记忆强化机制  
- **自适应出题**: 动态平衡复习和探索的比例

### 数据持久化
- JSON格式存储学生档案和学习历史
- 支持多用户并发使用
- 增量更新技能统计和掌握度

### 可扩展架构
- 模块化设计，各组件职责明确
- 支持自定义题库和课程大纲
- 易于集成到Web应用或移动应用中
